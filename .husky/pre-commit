#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo 'ğŸš§ğŸ‘·â€â™‚ï¸ Styling, testing and building your project before commiting'

# Check tsconfig standard
npm run check-types || (
  echo 'âš ï¸âš ï¸ Failed Type check. âš ï¸âš ï¸'
  false;
)

# Check Prettier standard
npm run check-format || (
  echo 'ğŸ–Œï¸âš ï¸ğŸ–Œï¸ Prettier Check Failed. Run npm run format, add changes and try commit again. ğŸ–Œï¸âš ï¸ğŸ–Œï¸'
  false;
)

# Check ESLint standard
npm run check-lint || (
  echo 'ğŸ”âš ï¸ğŸ” ESLint Check Failed. Run npm run lint, add changes and try commit again. ğŸ”âš ï¸ğŸ”'
  false;
)

# Check tests
npm run test || (
  echo 'ğŸ§ªâš ï¸ğŸ§ª Tests Failed. Fix tests and try commit again. ğŸ§ªâš ï¸ğŸ§ª'
  false;
)

# If everything passes... try to run a build
echo 'âŒ›âŒ›âŒ› ... Alright... Code looks good to me... Trying to build now. âŒ›âŒ›âŒ›'

npm run build || (
  echo 'ğŸš¨ğŸš¨ğŸš¨ Build Failed. Fix the errors and try commit again. ğŸš¨ğŸš¨ğŸš¨'
  false;
)
# If it builds we can commit
echo 'âœ…âœ…âœ… You win this time... I am committing this now. âœ…âœ…âœ…'
